@page "/addons"
@namespace Niconicome.Views.AddonPage.V2.Pages
@inject Niconicome.ViewModels.Mainpage.Subwindows.AddonManager.Pages.IndexViewModel DataContext;

<div>
	<div class="px-1 text-muted d-flex justify-content-between align-items-stretch">
		<h5 class="align-self-center">アドオンの管理</h5>
		<div class="dropdown">
			<button class="btn btn-light dropdown-toggle" type="button" id="configButton" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
				<i class="fa-solid fa-gear" />
			</button>
			<ul class="dropdown-menu p-1" aria-labelledby="configButton">
				<li><a class="dropdown-item" href="#">インストール</a></li>
				<li><a class="dropdown-item" href="#">更新</a></li>
				<li class="form-check">
					<input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate">
					<label class="form-check-label" for="flexCheckIndeterminate">
						デバッグモード
					</label>
				</li>
			</ul>
		</div>
	</div>

	<div class="mt-3">
		<h5 class="fw-bold">有効なアドオン</h5>
		<div>
			@foreach (var item in DataContext.LoadedAddons)
			{
				<div class="card mt-2">
					<a href="/" class="text-decoration-none text-reset">
						<div class="row">
							<div class="col-md-1 d-flex align-items-center">
								<img class="d-block mx-auto" height="32" width="32" src="@item.IconData" />
							</div>
							<div class="col-md-11 card-body p-2">
								<h5 class="card-title">@item.Name <span class="text-muted fs-6">by @item.Author</span></h5>
								<p class="fw-normal fs-6">@item.Description</p>
							</div>
						</div>
					</a>
				</div>
			}
		</div>
	</div>

	<div class="mt-5">
		<h5 class="fw-bold">アップデート可能なアドオン</h5>
		<div>
			@foreach (var item in DataContext.ToBeUpdatedAddons)
			{
				<div class="card mt-2">
					<a href="/" class="text-decoration-none text-reset">
						<div class="row">
							<div class="col-md-1 d-flex align-items-center">
								<img class="d-block mx-auto" height="32" width="32" src="@item.IconData" />
							</div>
							<div class="col-md-11 card-body p-2">
								<h5 class="card-title">@item.Name <span class="text-muted fs-6">by @item.Author</span></h5>
								<p class="fw-normal fs-6">@item.Description</p>
							</div>
						</div>
					</a>
				</div>
			}
		</div>
	</div>
</div>

@code {
	protected override void OnInitialized()
	{
		DataContext.AddListHandler(() => this.StateHasChanged());
	}
}